{"version":3,"sources":["./$_lazy_route_resource lazy namespace object","./src/app/api-communicator.service.ts","./src/app/app-config.service.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/components/date-picker-past/date-picker-past.component.ts","./src/app/components/date-picker-past/date-picker-past.component.html","./src/app/components/loading/loading.component.ts","./src/app/components/loading/loading.component.html","./src/app/map-data.service.ts","./src/app/maps/google-map-ext/google-map-ext.component.ts","./src/app/maps/google-map-ext/google-map-ext.component.html","./src/app/maps/maps.module.ts","./src/app/maps/open-street-map/open-street-map.component.ts","./src/app/maps/open-street-map/open-street-map.component.html","./src/app/time-ago-extends.pipe.ts","./src/environments/environment.ts","./src/main.ts"],"names":[],"mappings":"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","file":"main-es2015.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport {TimePosition, Vehicle} from './app.component';\nimport {AppConfigService} from './app-config.service';\n\n/*\n Service that communicates with Fleet Complete API\n */\n\ninterface LastData<T> {\n  status: number;\n  response: Array<T>;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ApiCommunicatorService {\n\n  apiUrl = '';\n  requestOptions = {observe: 'body', responseType: 'json'};\n\n  constructor(private http: HttpClient, appConfigService: AppConfigService) {\n    this.apiUrl = appConfigService.apiBaseUrl;\n  }\n\n  getLastData(key: string) {\n    return this.http.get<LastData<Vehicle>>(this.apiUrl + 'getLastData?json&key=' + encodeURIComponent(key));\n  }\n\n  getRawData(apiKey: string, object: string, date: Date){\n    date = new Date(date);\n    let currentTimeZoneDateStr = (date: Date) => {\n      var timeOffsetInMS:number = date.getTimezoneOffset() * 60000;\n      date.setTime(date.getTime() - timeOffsetInMS);\n      return date.toISOString().substring(0, 10);\n    };\n    const fromDate: string = currentTimeZoneDateStr(date);\n    const toDate: string = currentTimeZoneDateStr(new Date(date.setDate(date.getDate() + 1)));\n    const paramsObj = {\n      key: apiKey,\n      begTimestamp : fromDate,\n      endTimestamp : toDate,\n      objectId : object\n    };\n    // Not very efficient way of putting together string, but the object is small enough.\n    const requestParams = Object.keys(paramsObj).map((akey) => {\n      return encodeURIComponent(akey) + '=' + encodeURIComponent(paramsObj[akey]);\n    }).join('&');\n    const url = this.apiUrl + 'getRawData?json&' + requestParams;\n    return this.http.get<LastData<TimePosition>>(url);\n  }\n}\n","import {Injectable} from '@angular/core';\nimport {HttpClient} from '@angular/common/http';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AppConfigService {\n\n  private appConfig: any;\n\n  constructor(private http: HttpClient) { }\n\n  loadAppConfig() {\n    let href = '';\n    let base = document.querySelector(\"base\");\n    if(base !== null) href = base.href\n    return this.http.get(href + 'assets/config.json')\n      .toPromise()\n      .then(data => {\n        this.appConfig = data;\n      });\n  }\n\n  // This is an example property ... you can make it however you want.\n  get apiBaseUrl() {\n\n    if (!this.appConfig) {\n      throw Error('Config file not loaded!');\n    }\n\n    return this.appConfig.apiBaseUrl;\n  }\n}\n","import { Component } from '@angular/core';\nimport {ApiCommunicatorService} from './api-communicator.service';\nimport {MapDataService} from './map-data.service';\n\n\nexport interface Vehicle {\n  objectId: string;\n  objectName: string;\n  plate: string;\n  speed: string;\n  timestamp: string;\n  longitude: number;\n  latitude: number;\n  timestampDate?: Date;\n}\n\nexport interface TimePosition {\n  timestamp: string;\n  Longitude: number;\n  Latitude: number;\n  EngineStatus: string;\n  timestampDate?: Date;\n  Distance?: number;\n  DeltaDistance?: number;\n  speed: number;\n}\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css'],\n})\nexport class AppComponent {\n  title = 'FleetComplete';\n  apiKey = '';\n  vehicleList: Map<string ,Vehicle> = new Map<string, Vehicle>();\n  activeVehicle: Vehicle = null;\n  activeFetch = false;\n  activeFetchLoop = null;\n  objectDateFilter = new Date();\n  stopTimeThreshold = 120000;\n  stopAllowedDistance = 0.008;\n  activeObjectList: TimePosition[];\n  objectDisplayInfo = {\n    activeObjectStops: [],\n    traveledDistance: null,\n    calcDistance: \"\",\n  };\n\n  constructor(private apiService: ApiCommunicatorService, private mapDataService: MapDataService) {\n    mapDataService.distanceCalculated$.subscribe( (dist) => {\n      this.objectDisplayInfo.calcDistance = dist;\n    })\n  }\n\n  fetchListFromApi(){\n    this.apiService.getLastData(this.apiKey).subscribe((res) => {\n        if (this.activeFetch === true) return;\n        const response: Array<Vehicle> = res.response;\n        for (const item of response){\n          if(this.vehicleList.get(item.objectId)) {\n            this.vehicleList.set(item.objectId,item);\n          }\n        }\n        this.mapDataService.positionVehicles(this.vehicleList);\n      },\n      (error) => {\n        console.error(error);\n      }\n    );\n  }\n\n  fetchUnits(akey: string) {\n    if (this.activeFetch === true) { return;}\n    if (this.activeFetchLoop !== null) clearInterval(this.activeFetchLoop);\n    this.apiKey = akey;\n    this.mapDataService.clearVehicles();\n    this.clearVehicleInfo();\n    this.activeVehicle = null;\n    this.vehicleList = new Map<string, Vehicle>();\n    if (this.apiKey !== '') {\n      this.activeFetch = true;\n      this.apiService.getLastData(this.apiKey).subscribe((res) => {\n          this.activeFetch = false;\n          const response: Array<Vehicle> = res.response;\n          for (const item of response){\n            item.timestampDate = new Date(item.timestamp);\n            this.vehicleList.set(item.objectId,item);\n          }\n          this.mapDataService.positionVehicles(this.vehicleList);\n          let fetchList = this.fetchListFromApi;\n          let context = this;\n          this.activeFetchLoop = setInterval(function() {\n            fetchList.call(context);\n          },30000);\n        },\n        (error) => {\n          this.activeFetch = false;\n          this.apiKey == '';\n          console.error(error);\n        }\n      );\n    }\n  }\n\n  chooseVehicle(v) {\n    if (this.activeVehicle !== null && this.activeVehicle.objectId !== v.objectId){\n      this.clearVehicleInfo();\n    }\n    this.activeVehicle = v;\n    this.mapDataService.activateVehicle(v);\n  }\n\n  objectDateChanged(date: Date){\n    this.objectDateFilter = date;\n  }\n\n  private clearVehicleInfo(){\n    // tslint:disable-next-line:forin\n    for (const k in this.objectDisplayInfo){\n      this.objectDisplayInfo[k] = '';\n    }\n    this.mapDataService.clearVehicleTracks();\n  }\n\n  calcDistance() {\n    this.clearVehicleInfo();\n    if (this.activeVehicle) {\n      this.activeFetch = true;\n      this.activeObjectList = [];\n      this.apiService.getRawData(this.apiKey, this.activeVehicle.objectId, this.objectDateFilter).subscribe((res) => {\n        this.activeFetch = false;\n        this.objectDisplayInfo.calcDistance = null;\n        this.activeObjectList = [];\n        const stops: number[] = [];\n        const response: Array<TimePosition> = res.response;\n        if (response.length > 0){\n          let previousTime = new Date(response[0].timestamp);\n          let previousDistance = -1;\n          let previousStopDistance = -1;\n          let num = 0;\n          let totalT = 0;\n          for (const item of response){\n            if(item.timestamp === undefined) continue;\n            item.timestampDate = new Date(item.timestamp);\n\n            if (item.Distance === undefined) {\n              if(item.DeltaDistance === undefined || item.DeltaDistance === null) {\n                continue;\n              }\n              totalT += item.DeltaDistance;\n              item.Distance = totalT;\n            } else {\n              if (previousDistance === item.Distance) {\n                continue;\n              }\n            }\n\n            // if time difference between movements is over x minutes\n            if (item.timestampDate.valueOf() - previousTime.valueOf() > this.stopTimeThreshold && item.Distance - previousStopDistance > this.stopAllowedDistance) {\n              stops.push(num);\n              previousStopDistance = item.Distance;\n            }\n            num++;\n            this.activeObjectList.push(item);\n            previousDistance = item.Distance;\n            previousTime = item.timestampDate;\n          }\n          if(this.activeObjectList.length > 0) {\n            this.objectDisplayInfo.activeObjectStops = stops;\n            this.objectDisplayInfo.traveledDistance =\n              (this.activeObjectList[this.activeObjectList.length - 1].Distance - this.activeObjectList[0].Distance).toFixed(2);\n          } else {\n            if(totalT > 0)this.objectDisplayInfo.traveledDistance = totalT.toFixed(2);\n          }\n        }\n        this.mapDataService.addVehicleTracks(this.activeObjectList, stops);\n      },\n      error => {\n        this.activeFetch = false;\n        console.error(error);\n      }\n    );\n    }\n  }\n\n\n}\n","<style>\n  :host {\n    font-family: -apple-system, Gotham, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\";\n    font-size: 14px;\n    color: #333;\n    box-sizing: border-box;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6 {\n    margin: 8px 0;\n  }\n\n  p {\n    margin: 0;\n  }\n\n  .tx-left{\n    text-align: left;\n  }\n  .tx-right{\n    text-align: right;\n  }\n\n  .spacer {\n    flex: 1;\n  }\n\n  .msg-not{\n    color: #686868;\n    font-size: 12px;\n    font-style: italic;\n    text-align: center;\n  }\n\n  .fc-container{\n    max-width: 1480px;\n    margin-left: auto;\n    margin-right: auto;\n  }\n\n  .toolbar {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 60px;\n    background-color: #FFFFFF;\n    color: #080808;\n    font-weight: 600;\n  }\n\n  .toolbar .fc-container{\n    display: flex;\n    align-items: center;\n    height: 100%;\n  }\n\n  .toolbar .api-key-cont *{\n    margin-right: 6px;\n  }\n\n  .content {\n    display: flex;\n    margin: 82px auto 32px;\n    padding: 0 16px;\n    flex-direction: column;\n    align-items: center;\n    //background-color: #095991;\n    //color: #FFFFFF;\n  }\n\n  div.rocket-back{\n    position: fixed;\n    top: 0;\n    left: 10%;\n    height: 96vh;\n    overflow: hidden;\n    z-index: -8;\n  }\n\n  svg#rocket-smoke {\n    height: 120vh;\n    position: relative;\n    top: 0;\n    left: 10%;\n    z-index: -10;\n    transform: rotate(10deg);\n  }\n  svg#rocket-smoke2 {\n    height: 120vh;\n    position: absolute;\n    top: 0;\n    left: 12%;\n    z-index: -20;\n    transform: rotate(10deg);\n  }\n\n  a,\n  a:visited,\n  a:hover {\n    color: #1976d2;\n    text-decoration: none;\n  }\n\n  a:hover {\n    color: #125699;\n  }\n\n  button.fc-button {\n    background: #3672A5;\n    border: 1px solid #0C5690;\n    color: #ffffff;\n    font-weight: 500;\n    padding: 6px 6px;\n    min-width: 62px;\n    border-radius: 3px;\n    outline:none;\n  }\n  button.fc-button:hover{\n    cursor: pointer;\n  }\n  button.fc-button:focus {\n    border: 1px dashed #0ca9fa;\n    outline:none;\n    text-decoration: none;\n  }\n\n  button.fc-button:disabled{\n    opacity: 0.7;\n  }\n  button.fc-button:disabled:hover{\n    cursor: not-allowed;\n  }\n\n  .main-panel{\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    justify-content: space-between;\n    width: 100%;\n  }\n\n  .main-panel>.list-view{\n    max-width: 400px;\n    min-width: 240px;\n    width: 20vw;\n    display: flex;\n    flex-direction: column;\n    flex-wrap: wrap;\n  }\n  .main-panel>.list-view>*{\n    background-color: rgba(128,128,128,0.1);\n  }\n\n  .main-panel .vhl-list{\n    height: 240px;\n    height: 40vh;\n    min-height: 200px;\n    position: relative;\n    overflow-y: auto;\n    margin-bottom: 12px;\n  }\n  .main-panel .list-view table{\n    width: 100%;\n  }\n  .main-panel .list-view table th,\n  .main-panel .list-view table td{\n    padding: 6px 4px;\n  }\n  .main-panel .list-view{\n    position: relative;\n  }\n  .main-panel .list-view table thead tr:first-child{\n    position: sticky;\n    top: 0;\n    background-color: #f2f2f2;\n  }\n\n\n\n  .main-panel .vhl-list table tbody tr:hover{\n    cursor: pointer;\n  }\n  .main-panel .list-view table tbody tr:nth-child(odd){\n    background-color: rgba(0,0,0,0.2);\n  }\n  .main-panel .vhl-list table tbody tr.active{\n    font-weight: 500;\n  }\n\n  .main-panel .trip-calc table {\n    margin-top: 12px;\n  }\n  .main-panel .trip-calc table tr td{\n    padding: 8px 6px;\n  }\n  .main-panel .trip-calc table tr td:nth-child(2){\n    min-width: 42px;\n  }\n\n  .main-panel .trip-calc{\n    height: 240px;\n    height: 20vh;\n    min-height: 180px;\n    position: relative;\n    overflow: hidden;\n  }\n\n  #map{\n    width: 100%;\n    max-width: 1080px;\n  }\n\n  .main-panel .date-filter-row *{\n    margin-right: 6px;\n  }\n  .main-panel .date-filter-row input{\n    max-width: 120px;\n  }\n\n  @media screen and (max-width: 1420px) {\n    #map{\n      width: 100%;\n      max-width: 68vw;\n    }\n  }\n\n  @media screen and (max-width: 900px) {\n    #map{\n      width: 100%;\n      max-width: 98vw;\n    }\n    .main-panel{\n      align-items: center;\n      justify-content: center;\n    }\n    .main-panel>.list-view{\n      width: 98vw;\n    }\n  }\n\n\n  @media screen and (max-width: 767px) {\n\n    svg#rocket-smoke2 {\n      right: 130px;\n    }\n    svg#rocket-smoke {\n      right: 120px;\n      transform: rotate(-5deg);\n    }\n  }\n\n  @media screen and (max-width: 575px) {\n    svg#rocket-smoke2,\n    svg#rocket-smoke {\n      display: none;\n      visibility: hidden;\n    }\n  }\n</style>\n\n<!-- Toolbar -->\n<div class=\"toolbar\" role=\"banner\">\n  <div class=\"fc-container\">\n    <div class=\"api-key-cont\">\n      <label for=\"fc-api-key\" i18n=\"api key input| \">Enter API key</label>\n      <input id=\"fc-api-key\" type=\"text\" #typedKey>\n      <button class=\"fc-button\" i18n=\"api key go| Make API key request\" (click)=\"fetchUnits(typedKey.value)\">Go</button>\n    </div>\n    <div class=\"spacer\"></div>\n    <span i18n=\"header message| Toolbar welcome message\">Fleet Complete API tester</span>\n  </div>\n</div>\n\n<div class=\"rocket-back\">\n<svg id=\"rocket-smoke\" alt=\"Rocket Ship Smoke\" xmlns=\"http://www.w3.org/2000/svg\" width=\"516.119\" height=\"1083.632\" viewBox=\"0 100 426.119 943.632\">\n  <path id=\"Path_40\" data-name=\"Path 40\" d=\"M644.6,141S143.02,215.537,147.049,870.207s342.774,201.755,342.774,201.755S404.659,847.213,388.815,762.2c-27.116-145.51-11.551-384.124,271.9-609.1C671.15,139.365,644.6,141,644.6,141Z\" transform=\"translate(-147.025 -140.939)\" fill=\"#f5f5f5\"/>\n</svg>\n<svg id=\"rocket-smoke2\" alt=\"Rocket Ship Smoke\" xmlns=\"http://www.w3.org/2000/svg\" width=\"516.119\" height=\"1083.632\" viewBox=\"0 100 426.119 943.632\">\n  <path id=\"Path_40\" data-name=\"Path 40\" d=\"M644.6,141S143.02,215.537,147.049,870.207s342.774,201.755,342.774,201.755S404.659,847.213,388.815,762.2c-27.116-145.51-11.551-384.124,271.9-609.1C671.15,139.365,644.6,141,644.6,141Z\" transform=\"translate(-147.025 -140.939)\" fill=\"#f0f3f6\"/>\n</svg>\n</div>\n<div class=\"content fc-container\" role=\"main\">\n\n  <div class=\"main-panel\">\n    <div class=\"list-view\">\n      <div class=\"vhl-list\">\n        <table>\n          <thead>\n          <tr><th class=\"tx-left\" i18n>Name</th><th class=\"tx-right\" i18n>Speed</th><th class=\"tx-right\" i18n>Last Update</th></tr>\n          </thead>\n          <tbody>\n          <tr *ngFor=\"let vel of vehicleList | keyvalue\" [ngClass]=\"{'active': activeVehicle == vel.value}\" (click)=\"chooseVehicle(vel.value)\">\n            <td class=\"tx-left\">{{vel.value.objectName}}</td><td class=\"tx-right\">{{vel.value.speed}}</td><td class=\"tx-right\">{{vel.value.timestamp | timeAgo}}</td>\n          </tr>\n          </tbody>\n        </table>\n        <div class=\"msg-not\" *ngIf=\"vehicleList.size === 0 && activeFetch=== false\" style=\"margin-top: 10vh\">\n          <span i18n>(No vehicles found)</span>\n        </div>\n        <app-loading *ngIf=\"activeFetch=== true\" style=\"margin-top: 10vh\"></app-loading>\n      </div>\n      <div class=\"trip-calc\">\n        <div class=\"date-filter-row\">\n          <label i18n>Date</label>\n          <app-date-picker-past (dateChanged)=\"objectDateChanged($event)\"></app-date-picker-past>\n          <button class=\"fc-button\" i18n=\"vehicle key go| Request detailed Vehicle info\" (click)=\"calcDistance()\" [disabled]=\"activeVehicle === null\">Go</button>\n        </div>\n        <div class=\"trip-info\">\n          <table>\n            <tbody>\n            <tr><td class=\"tx-left\" i18n>Total Distance</td><td class=\"tx-right\">\n              {{objectDisplayInfo.traveledDistance}} <span *ngIf=\"objectDisplayInfo.traveledDistance !== null&& objectDisplayInfo.traveledDistance !== ''\" i18n=\"kilometer\">km</span>\n            </td></tr>\n            <tr><td class=\"tx-left\" i18n>Number of Stops</td><td class=\"tx-right\">{{objectDisplayInfo.activeObjectStops.length}}</td></tr>\n            <tr><td class=\"tx-left\" i18n>Calculated Distance</td><td class=\"tx-right\">{{objectDisplayInfo.calcDistance}}\n              <div [ngSwitch]=\"objectDisplayInfo.calcDistance\" style=\"display: inline-block\">\n                <app-loading *ngSwitchCase=\"null\"></app-loading>\n                <span *ngSwitchCase=\"'-'\"></span>\n                <span *ngSwitchCase=\"''\"></span>\n                <span *ngSwitchDefault>km</span>\n              </div>\n            </td></tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n    <div id=\"map\" class=\"map-view\">\n<!--          <app-open-street-map></app-open-street-map>-->\n      <app-google-map-ext></app-google-map-ext>\n    </div>\n  </div>\n\n</div>\n","import { BrowserModule } from '@angular/platform-browser';\nimport {APP_INITIALIZER, NgModule, Pipe} from '@angular/core';\nimport { HttpClientModule } from '@angular/common/http';\nimport { AppComponent } from './app.component';\nimport {MatDatepickerModule} from '@angular/material/datepicker';\nimport {MatNativeDateModule} from '@angular/material/core';\nimport {BrowserAnimationsModule} from '@angular/platform-browser/animations';\nimport { DatePickerPastComponent } from './components/date-picker-past/date-picker-past.component';\nimport {MapsModule} from './maps/maps.module';\nimport {ReactiveFormsModule} from '@angular/forms';\nimport { TimeAgoExtendsPipe } from './time-ago-extends.pipe';\nimport { LoadingComponent } from './components/loading/loading.component';\nimport {AppConfigService} from './app-config.service';\n\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    DatePickerPastComponent,\n    TimeAgoExtendsPipe,\n    LoadingComponent,\n  ],\n  imports: [\n    BrowserModule,\n    HttpClientModule,\n    MatDatepickerModule,\n    MatNativeDateModule,\n    BrowserAnimationsModule,\n    MapsModule,\n    ReactiveFormsModule,\n  ],\n  providers: [\n    {\n      provide: APP_INITIALIZER,\n      multi: true,\n      deps: [AppConfigService],\n      useFactory: (appConfigService: AppConfigService) => {\n        return () => {\n          //Make sure to return a promise!\n          return appConfigService.loadAppConfig();\n        };\n      }\n    }\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import {Component, EventEmitter, OnInit, Output} from '@angular/core';\nimport {FormControl} from '@angular/forms';\n\n@Component({\n  selector: 'app-date-picker-past',\n  templateUrl: './date-picker-past.component.html',\n  styleUrls: ['./date-picker-past.component.css']\n})\nexport class DatePickerPastComponent implements OnInit {\n  maxDate: Date;\n  selectedDate: FormControl;\n  @Output() dateChanged = new EventEmitter<Date>();\n\n  constructor() {\n    this.maxDate = new Date();\n    this.selectedDate = new FormControl(this.maxDate);\n    this.dateChanged.emit(this.selectedDate.value);\n  }\n\n  dateChange(){\n    this.dateChanged.emit(this.selectedDate.value);\n  }\n\n  ngOnInit(): void {\n  }\n\n}\n","<input [matDatepicker]=\"vehicleDatepicker\" [max]=\"maxDate\" [formControl]=\"selectedDate\" (dateChange)=\"dateChange()\">\n<mat-datepicker-toggle [for]=\"vehicleDatepicker\"></mat-datepicker-toggle>\n<mat-datepicker #vehicleDatepicker></mat-datepicker>\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-loading',\n  templateUrl: './loading.component.html',\n  styleUrls: ['./loading.component.css']\n})\nexport class LoadingComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<style>\n  :host {\n    transition: opacity .4s;\n  }\n  :host.hide-in-proc {\n    transition: opacity .4s;\n    opacity: 0;\n  }\n  span.loading {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 16px;\n    color: #868686;\n    font-size: 2.5em;\n    text-shadow: 2px 2px 10px rgba(0,0,0,0.2);\n  }\n  body {\n    margin: 0;\n    padding: 0;\n  }\n\n  @keyframes dots {\n    50% {\n      transform: translateY(-.4rem);\n    }\n    100% {\n      transform: translateY(0);\n    }\n  }\n\n  .d {\n    animation: dots 1.5s ease-out infinite;\n  }\n  .d-2 {\n    animation-delay: .5s;\n  }\n  .d-3 {\n    animation-delay: 1s;\n  }\n</style>\n<span class=\"loading\">\n<span class=\"d\">.</span><span class=\"d d-2\">.</span><span class=\"d d-3\">.</span>\n</span>\n","import { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport {TimePosition, Vehicle} from './app.component';\nimport {strict} from 'assert';\n\n/*\n Service that communicates with Maps API\n*/\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MapDataService {\n\n  // Observable string sources\n  private vehiclePositionSource = new Subject<Map<string, Vehicle>>();\n  private vehiclesClearedSource = new Subject();\n  private activeVehicleSource = new Subject<Vehicle>();\n  private vehicleTrackSource = new Subject<[TimePosition[], number[]]>();\n  private vehicleTrackClearSource = new Subject();\n\n  private calculatedDistanceSource = new Subject<string>();\n\n  // Observable string streams\n  vehiclesPositioned$ = this.vehiclePositionSource.asObservable();\n  vehiclesCleared$ = this.vehiclesClearedSource.asObservable();\n  vehiclesActivated$ = this.activeVehicleSource.asObservable();\n  vehicleTrack$ = this.vehicleTrackSource.asObservable();\n  vehicleTracksCleared$ = this.vehicleTrackClearSource.asObservable();\n\n  distanceCalculated$ = this.calculatedDistanceSource.asObservable();\n\n  // Service message commands\n  positionVehicles(vehicles: Map<string, Vehicle>) {\n    this.vehiclePositionSource.next(vehicles);\n  }\n\n  clearVehicles() {\n    this.vehiclesClearedSource.next();\n  }\n\n  activateVehicle(vehicle: Vehicle) {\n    this.activeVehicleSource.next(vehicle);\n  }\n\n  addVehicleTracks(positions: TimePosition[], stops: number[]) {\n    this.vehicleTrackSource.next([positions, stops]);\n  }\n\n  clearVehicleTracks() {\n    this.vehicleTrackClearSource.next();\n  }\n\n  sendCalculatedDistance(dist: string) {\n    this.calculatedDistanceSource.next(dist);\n  }\n}\n","import {AfterViewInit, Component, IterableDiffers, OnDestroy, OnInit, QueryList, ViewChild, ViewChildren} from '@angular/core';\nimport {Subscription} from 'rxjs';\nimport {MapDataService} from '../../map-data.service';\nimport {MapMarker, MapPolyline} from '@angular/google-maps';\nimport {TimePosition} from '../../app.component';\nimport MarkerClusterer from '@google/markerclustererplus';\n\n\ninterface CurrentMapMarker {\n  position: { lat: number, lng: number};\n  label?: {\n    color?: string,\n    text?: string,\n    fontWeight?: string\n  };\n  title: string;\n  options?: any;\n}\n\ninterface CurrentMapPolyline {\n  path: object[];\n}\n\ninterface MapServiceSubscriptions {\n  addVehicles: Subscription;\n  clearVehicles: Subscription;\n  activateVehicle: Subscription;\n  addVehicleTrack: Subscription;\n  clearVehicleTrack: Subscription;\n  markerChanges: Subscription;\n}\n@Component({\n  selector: 'app-google-map-ext',\n  templateUrl: './google-map-ext.component.html',\n  styleUrls: ['./google-map-ext.component.css']\n})\nexport class GoogleMapExtComponent implements OnInit, OnDestroy, AfterViewInit {\n\n  markers: Map<string, CurrentMapMarker> = new Map<string, CurrentMapMarker>();\n  stopMarkers: CurrentMapMarker[] = [];\n  @ViewChildren(MapMarker) markerElements: QueryList<MapMarker>;\n  markerCluster = null;\n  polylines: CurrentMapPolyline[] = [];\n  markerDiffer;\n  distService = {\n    matInstance: new google.maps.DistanceMatrixService(),\n    routeInstance: new google.maps.DirectionsService(),\n    distServiceCount: 0\n  };\n\n\n  @ViewChild('map') map;\n  zoom = 12;\n  center: google.maps.LatLngLiteral;\n  subscription: MapServiceSubscriptions = {\n    addVehicles: null,\n    clearVehicles: null,\n    activateVehicle: null,\n    addVehicleTrack: null,\n    clearVehicleTrack: null,\n    markerChanges: null,\n  };\n\n  constructor(private mapData: MapDataService, private differs: IterableDiffers) {\n    this.center = {\n      lat: 58.370568,\n      lng: 26.715893,\n    };\n    this.markerDiffer = this.differs.find([]).create(null);\n    this.subscription.addVehicles = mapData.vehiclesPositioned$.subscribe(\n      vehs => {\n        for (const v of vehs){\n          this.addMarker(v[1].objectName, [v[1].latitude, v[1].longitude]);\n        }\n      });\n\n    this.subscription.clearVehicles = mapData.vehiclesCleared$.subscribe(\n      () => {\n        if (this.markerCluster !== null) { this.markerCluster.clearMarkers(); }\n        this.markers = new Map<string, CurrentMapMarker>();\n        this.stopMarkers = [];\n      });\n\n    this.subscription.addVehicles = mapData.vehicleTrack$.subscribe(\n      tracks => {\n        this.addPolyline(tracks[0], tracks[1]);\n      });\n    this.subscription.clearVehicleTrack = mapData.vehicleTracksCleared$.subscribe(\n      () => {\n        this.polylines = [];\n        this.stopMarkers = [];\n      });\n\n    this.subscription.activateVehicle = mapData.vehiclesActivated$.subscribe(\n      (veh) => {\n        this.center = {\n          lat: veh.latitude,\n          lng: veh.longitude,\n        };\n      });\n  }\n\n  ngOnInit(): void {}\n\n  ngAfterViewInit(): void {\n    this.markerCluster = new MarkerClusterer(this.map._googleMap, [], {imagePath: 'assets/img/maps_cluster/m', imageExtension: 'png'});\n    this.subscription.markerChanges = this.markerElements.changes.subscribe(\n      tracks => {\n        const changeDiff = this.markerDiffer.diff(tracks);\n        if (changeDiff) {\n          changeDiff.forEachAddedItem((change) => {\n            const marker = change.item._marker;\n            if (marker.getTitle() === '') {\n              return;\n            }\n            this.markerCluster.addMarker(marker);\n          });\n          changeDiff.forEachRemovedItem((change) => {\n            const marker = change.item._marker;\n            if (marker.getTitle() === '') {\n              return;\n            }\n            this.markerCluster.removeMarker(marker);\n          });\n        }\n      });\n  }\n\n  ngOnDestroy() {\n    // tslint:disable-next-line:forin\n    for (const s in this.subscription){\n      if (this.subscription[s] === null) {\n        continue;\n      }\n      this.subscription[s].unsubscribe();\n    }\n  }\n\n  addMarker(label: string, position: [number, number]) {\n    let exist = this.markers.get(label);\n    if (exist) {\n      exist.position = {\n        lat: position[0],\n        lng: position[1],\n      };\n      return;\n    }\n    this.markers.set(label,{\n      position: {\n        lat: position[0],\n        lng: position[1],\n      },\n      label: {\n        color: '#080808',\n        text: label,\n        fontWeight: '500'\n      },\n      title: label,\n      options: {animation: google.maps.Animation.DROP}\n    });\n  }\n\n\n  addPolyline(tracks: TimePosition[], stops: number[]){\n    const coords = [];\n    for (const pos of tracks){\n      coords.push({\n        lat: pos.Latitude,\n        lng: pos.Longitude,\n      });\n    }\n\n    const waypoints: google.maps.LatLng[] = [];\n    if (stops.length > 0){\n      waypoints.push(new google.maps.LatLng(coords[0]));\n    }\n    const bounds = new google.maps.LatLngBounds();\n    for (const s of stops){\n      this.stopMarkers.push({\n        position: coords[s],\n        title: '',\n        options: {icon: {\n            path: google.maps.SymbolPath.CIRCLE,\n            scale: 4\n          }}\n      });\n      bounds.extend(coords[s]);\n      waypoints.push(new google.maps.LatLng(coords[s]));\n    }\n\n    if (stops.length > 0) {\n      if (stops.length > 1) {\n        this.map._googleMap.fitBounds(bounds);\n      } else {\n        this.center = coords[stops[0]];\n      }\n      const lw = waypoints[waypoints.length - 1];\n      const lc = coords[coords.length - 1];\n      if (lw.lat() !== lc.lat || lw.lng() !== lc.lng){\n        waypoints.push(new google.maps.LatLng(lc));\n      }\n    }\n    this.polylines.push({\n      path: coords\n    });\n    if (coords.length > 0){\n      this.requestOptimalRouteByRoute(waypoints);\n    } else {\n      this.mapData.sendCalculatedDistance(\"-\");\n    }\n  }\n\n  requestOptimalRouteByRoute(waypoints: google.maps.LatLng[]){\n\n\n    let wayPointChuncks: google.maps.DirectionsRequest[] = [];\n    let distlen = 10;\n    let c = 0;\n    let chunk: google.maps.DirectionsRequest = {\n      origin: null,\n      destination: null,\n      travelMode: google.maps.TravelMode.DRIVING,\n      waypoints: []\n    };\n    distlen+=2;\n    for (let i = 0; i < waypoints.length; i++){\n\n      c++;\n      switch (c) {\n        case 1:\n          chunk.origin = waypoints[i];\n          break;\n        case distlen:\n          chunk.destination = waypoints[i];\n          wayPointChuncks.push(chunk);\n          chunk = {\n            origin: null,\n            destination: null,\n            travelMode: google.maps.TravelMode.DRIVING,\n            waypoints: []\n          };\n          c=0;\n          i--;\n          break;\n        default:\n          // @ts-ignore\n          chunk.waypoints.push({ location: waypoints[i], stopover:true});\n      }\n\n    }\n    if (chunk.waypoints.length > 0){\n      let end = chunk.waypoints.pop();\n      chunk.destination = end.location;\n      wayPointChuncks.push(chunk);\n    }\n\n    let reqD = {\n      req: this.distService.routeInstance.route,\n      statuses: google.maps.DirectionsStatus,\n      calcDistance: function(response): number {\n        let distance = 0;\n        for (const leg of response.routes[0].legs){\n          if (leg.distance !== undefined){\n            distance += leg.distance.value;\n          } else {\n            return  null;\n          }\n        }\n        return distance;\n      }\n    };\n    this.processWayPointChunks(wayPointChuncks, reqD);\n  }\n\n\n  // Try the matrix request. sends less data, but slower since needs to request every distance separately.\n  requestOptimalRouteByMatrix(waypoints: google.maps.LatLng[]){\n    const dest = waypoints.slice(1);\n    waypoints.pop();\n\n    let wayPointChuncks: google.maps.DistanceMatrixRequest[] = [];\n    let distlen = 1;\n    let j = 0;\n    let c = 0;\n    let chunk: google.maps.DistanceMatrixRequest = {\n      origins: [],\n      destinations: [],\n      travelMode: google.maps.TravelMode.DRIVING\n    };\n    for (let i = 1; i < waypoints.length; i++,j++){\n      // @ts-ignore\n      chunk.origins.push(waypoints[j]);\n      // @ts-ignore\n      chunk.destinations.push(waypoints[i]);\n      c++;\n      if (c >= distlen){\n        wayPointChuncks.push(chunk);\n        chunk = {\n          origins: [],\n          destinations: [],\n          travelMode: google.maps.TravelMode.DRIVING\n        };\n        c=0;\n      }\n    }\n    if (chunk.origins.length > 0){\n      wayPointChuncks.push(chunk);\n    }\n\n    let reqD = {\n      req: this.distService.matInstance.getDistanceMatrix,\n      statuses: google.maps.DistanceMatrixStatus,\n      calcDistance: function(response): number {\n        let distance = 0;\n        for (const r of response.rows){\n          let elems = r.elements;\n          for (const elem of elems){\n            if (elem.status === 'OK') {\n              distance += elem.distance.value;\n            } else {\n              return null;\n            }\n          }\n        }\n        return distance;\n      }\n    };\n    this.processWayPointChunks(wayPointChuncks, reqD);\n  }\n\n   processWayPointChunks(wayPointChuncks: google.maps.DistanceMatrixRequest[], requestFunctionData){\n    this.distService.distServiceCount++;\n    const currentDistServiceCount = this.distService.distServiceCount;\n    const localService = this.distService;\n    const localMapData = this.mapData;\n    let totalDistance: number = 0;\n    let getDistances = function(dist: google.maps.DistanceMatrixRequest, count: number) {\n      count++;\n      requestFunctionData.req(dist, (response, status) => {\n        if(currentDistServiceCount !== localService.distServiceCount) {\n          localMapData.sendCalculatedDistance(\"\");\n          return;\n        }\n        if (status === requestFunctionData.statuses.OK) {\n          let distance = requestFunctionData.calcDistance(response);\n          if (distance === null){\n            localMapData.sendCalculatedDistance(\"-\");\n            return;\n          } else {\n            totalDistance += distance;\n          }\n          if(wayPointChuncks.length>0){\n            setTimeout(() => {getDistances(wayPointChuncks.shift(),0)},10);\n          } else {\n            const km = totalDistance/1000;\n            localMapData.sendCalculatedDistance(km.toFixed(2));\n          }\n        } else if (status === requestFunctionData.statuses.OVER_QUERY_LIMIT && count < 4) {\n          console.error('Maps error: ', status, count);\n          setTimeout(() => {getDistances(dist,count)},200*count);\n        } else {\n          localMapData.sendCalculatedDistance(\"-\");\n        }\n      });\n    };\n\n    if(wayPointChuncks.length>0){\n      getDistances(wayPointChuncks.shift(),0)\n    } else {\n      localMapData.sendCalculatedDistance(\"-\");\n    }\n  }\n\n}\n","<google-map #map  height=\"80vh\"\n              width=\"100%\"\n              [zoom]=\"zoom\"\n              [center]=\"center\">\n\n  <map-marker\n    *ngFor=\"let marker of markers | keyvalue\"\n    [position]=\"marker.value.position\"\n    [label]=\"marker.value.label\"\n    [title]=\"marker.value.title\"\n    [options]=\"marker.value.options\"\n  >\n  </map-marker>\n  <map-marker\n    *ngFor=\"let marker of stopMarkers\"\n    [position]=\"marker.position\"\n    [label]=\"marker.label\"\n    [title]=\"marker.title\"\n    [options]=\"marker.options\"\n  >\n  </map-marker>\n  <map-polyline *ngFor=\"let poly of polylines\"\n                [path]=\"poly.path\">\n  </map-polyline>\n</google-map>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { OpenStreetMapComponent } from './open-street-map/open-street-map.component';\nimport { GoogleMapsModule } from '@angular/google-maps';\nimport { GoogleMapExtComponent } from './google-map-ext/google-map-ext.component';\n\n\n@NgModule({\n  declarations: [OpenStreetMapComponent, GoogleMapExtComponent],\n  exports: [\n    OpenStreetMapComponent,\n    GoogleMapExtComponent\n  ],\n  imports: [\n    CommonModule,\n    GoogleMapsModule\n  ]\n})\nexport class MapsModule { }\n","import {Component, OnInit} from '@angular/core';\nimport {Map as OsMap, View} from 'ol';\nimport {Tile as TileLayer, Vector as VectorLayer} from 'ol/layer';\nimport VectorSource from 'ol/source/Vector';\nimport {defaults as defaultControls} from 'ol/control';\nimport OSM from 'ol/source/OSM';\nimport 'ol/interaction';\nimport {MapDataService} from '../../map-data.service';\nimport {Subscription} from 'rxjs';\n\ninterface MapServiceSubscriptions {\n  addVehicles: Subscription;\n  clearVehicles: Subscription;\n  activateVehicle: Subscription;\n  addVehicleTrack: Subscription;\n  clearVehicleTrack: Subscription;\n  markerChanges: Subscription;\n}\n\n@Component({\n  selector: 'app-open-street-map',\n  templateUrl: './open-street-map.component.html',\n  styleUrls: ['./open-street-map.component.css'],\n})\nexport class OpenStreetMapComponent implements OnInit {\n\n  map: OsMap;\n  markers;\n\n  center: object;\n  subscription: MapServiceSubscriptions = {\n    addVehicles: null,\n    clearVehicles: null,\n    activateVehicle: null,\n    addVehicleTrack: null,\n    clearVehicleTrack: null,\n    markerChanges: null,\n  };\n\n  constructor(private mapData: MapDataService) {\n    this.center = {\n      lat: 58.370568,\n      lng: 26.715893,\n    };\n\n    this.subscription.addVehicles = mapData.vehiclesPositioned$.subscribe(\n      vehs => {\n        for (const v of vehs){\n          this.addMarker(v[1].objectName, v[1].latitude, v[1].longitude);\n        }\n      });\n\n    this.subscription.clearVehicles = mapData.vehiclesCleared$.subscribe(\n      () => {\n\n      });\n\n    this.subscription.addVehicles = mapData.vehicleTrack$.subscribe(\n      tracks => {\n\n      });\n    this.subscription.clearVehicleTrack = mapData.vehicleTracksCleared$.subscribe(\n      () => {\n\n      });\n\n    this.subscription.activateVehicle = mapData.vehiclesActivated$.subscribe(\n      (veh) => {\n        this.center = {\n          lat: veh.latitude,\n          lng: veh.longitude,\n        };\n      });\n  }\n\n  addMarker(label: string, lon: number, lat: number){\n\n  }\n\n  ngOnInit(): void {\n    this.map = new OsMap({\n      target: 'os-map',\n      layers: [\n        new TileLayer({\n          source: new OSM()\n        })\n      ],\n      view: new View({\n        center: [0, 0],\n        zoom: 0\n      }),\n      controls: defaultControls(),\n    });\n    this.markers = new VectorLayer({\n      source: new VectorSource({\n        features: []\n      }),\n    });\n    this.map.addLayer(this.markers);\n  }\n\n}\n","<style>\n  #os-map{\n    width: 100%;\n    height: 82vh;\n  }\n</style>\n<div id=\"os-map\">\n\n</div>\n<div id=\"os-controls\">\n\n</div>\n","import { Pipe } from '@angular/core';\nimport {TimeAgoPipe} from 'time-ago-pipe';\n\n// Make timeago pipe work in Angular 9\n@Pipe({\n  name: 'timeAgo',\n  pure: false\n})\nexport class TimeAgoExtendsPipe extends TimeAgoPipe {}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"sourceRoot":"webpack:///"}